<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MERIDIAN | Horology Collection</title>
    <meta name="description" content="Mühendislik ve estetiğin buluştuğu lüks saat koleksiyonu.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }

        :root {
            --background: #FAFAFA;
            --foreground: #171717;
            --card: #FFFFFF;
            --muted: #F5F5F5;
            --muted-foreground: #737373;
            --border: #E5E5E5;
            --radius: 12px;
            --sides: 24px;
            --header-height: 72px;
            --ripple-color: rgba(23, 23, 23, 0.15);
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--background);
            color: var(--foreground);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* Ripple Effects */
        .ripple-container { position: relative; overflow: hidden; }
        .ripple {
            position: absolute; border-radius: 50%; background: var(--ripple-color);
            transform: scale(0); animation: ripple-animation 0.6s ease-out forwards; pointer-events: none;
        }
        @keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }
        .ripple-light { --ripple-color: rgba(23, 23, 23, 0.12); }
        .ripple-dark { --ripple-color: rgba(255, 255, 255, 0.25); }

        /* Header */
        .header {
            position: fixed; top: 0; left: 0; right: 0; height: var(--header-height);
            padding: 0 var(--sides); display: flex; align-items: center; justify-content: space-between;
            z-index: 1000; background: linear-gradient(to bottom, var(--background) 0%, var(--background) 85%, transparent 100%);
        }
        .logo { font-size: 1.5rem; font-weight: 700; letter-spacing: -0.03em; text-decoration: none; color: var(--foreground); }
        .nav { display: flex; align-items: center; gap: 1.5rem; }
        .nav-list { display: flex; align-items: center; gap: 1.5rem; list-style: none; }
        .nav-link {
            font-size: 0.8125rem; font-weight: 600; text-transform: uppercase; text-decoration: none;
            color: var(--foreground); opacity: 0.5; transition: opacity 0.2s; letter-spacing: 0.02em;
            padding: 0.5rem 0.75rem; border-radius: var(--radius);
        }
        .nav-link:hover, .nav-link.active { opacity: 1; }
        
        /* Language Switcher */
        .lang-switch { display: flex; background: var(--card); border-radius: 4px; overflow: hidden; border: 1px solid var(--border); }
        .lang-btn {
            padding: 0.375rem 0.625rem; font-size: 0.75rem; font-weight: 600; background: none;
            border: none; cursor: pointer; opacity: 0.4; transition: all 0.2s; position: relative; overflow: hidden;
        }
        .lang-btn.active { background: var(--foreground); color: var(--background); opacity: 1; }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none; width: 40px; height: 40px; background: var(--card); border: 1px solid var(--border);
            border-radius: 6px; cursor: pointer; flex-direction: column; align-items: center;
            justify-content: center; gap: 5px; transition: all 0.3s ease; position: relative; z-index: 10001; overflow: hidden;
        }
        .mobile-menu-btn span { width: 18px; height: 2px; background: var(--foreground); border-radius: 1px; transition: all 0.4s; }
        .mobile-menu-btn.active { background: transparent; border-color: transparent; }
        .mobile-menu-btn.active span { background: var(--background); }
        .mobile-menu-btn.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
        .mobile-menu-btn.active span:nth-child(2) { opacity: 0; transform: scaleX(0); }
        .mobile-menu-btn.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

        /* Fullscreen Mobile Menu */
        .mobile-menu {
            position: fixed; inset: 0; z-index: 10000; background: var(--foreground);
            display: flex; flex-direction: column; clip-path: circle(0% at calc(100% - 44px) 36px);
            transition: clip-path 0.7s cubic-bezier(0.4, 0, 0.2, 1); visibility: hidden;
        }
        .mobile-menu.active { clip-path: circle(150% at calc(100% - 44px) 36px); visibility: visible; }
        .mobile-menu-header { height: var(--header-height); display: flex; align-items: center; justify-content: space-between; padding: 0 var(--sides); }
        .mobile-menu-logo { font-size: 1.5rem; font-weight: 700; color: var(--background); text-decoration: none; opacity: 0; transform: translateX(-20px); transition: all 0.5s 0.3s; }
        .mobile-menu.active .mobile-menu-logo { opacity: 1; transform: translateX(0); }
        .mobile-menu-content { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 2rem var(--sides); overflow-y: auto; }
        .mobile-menu-category { font-size: 0.6875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.15em; color: rgba(255,255,255,0.4); margin-bottom: 2rem; opacity: 0; transform: translateY(20px); transition: all 0.5s 0.2s; }
        .mobile-menu.active .mobile-menu-category { opacity: 1; transform: translateY(0); }
        .mobile-menu-nav { list-style: none; text-align: center; display: flex; flex-direction: column; gap: 0.5rem; width: 100%; max-width: 320px; }
        .mobile-menu-link {
            display: block; padding: 0.875rem 1.5rem; font-size: 1.125rem; font-weight: 600; text-decoration: none;
            color: var(--background); letter-spacing: -0.01em; border-radius: var(--radius); transform: translateY(40px);
            opacity: 0; transition: transform 0.5s, opacity 0.5s, background 0.2s; position: relative; overflow: hidden;
        }
        .mobile-menu.active .mobile-menu-link { transform: translateY(0); opacity: 1; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(1) .mobile-menu-link { transition-delay: 0.25s; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(2) .mobile-menu-link { transition-delay: 0.3s; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(3) .mobile-menu-link { transition-delay: 0.35s; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(4) .mobile-menu-link { transition-delay: 0.4s; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(5) .mobile-menu-link { transition-delay: 0.45s; }
        .mobile-menu-count { font-size: 0.75rem; font-weight: 500; color: rgba(255,255,255,0.4); margin-left: 0.5rem; }

        /* Layout & Sidebar */
        .layout { display: flex; min-height: 100vh; }
        .sidebar {
            width: 280px; flex-shrink: 0; height: 100vh; position: sticky; top: 0;
            padding: var(--sides); padding-top: calc(var(--header-height) + 24px); overflow-y: auto;
        }
        .sidebar-title { font-size: 0.6875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted-foreground); margin-bottom: 1rem; }
        .filter-list { list-style: none; }
        .filter-btn {
            width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0.75rem 1rem;
            font-size: 0.875rem; font-weight: 500; background: none; border: none; border-radius: var(--radius);
            cursor: pointer; text-align: left; transition: all 0.2s; color: var(--foreground); position: relative; overflow: hidden;
        }
        .filter-btn:hover { background: var(--muted); }
        .filter-btn.active { background: var(--foreground); color: var(--background); }
        .filter-count { font-size: 0.75rem; opacity: 0.5; }
        .main { flex: 1; min-width: 0; padding: calc(var(--header-height) + 24px) var(--sides) var(--sides) var(--sides); }

        /* Yeni Grid - Satırda daha fazla ürün */
        .product-grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 16px; 
        }

        /* Yeniden tasarlanmış ürün kartları */
        .product-card { 
            position: relative; 
            background: var(--card); 
            border-radius: var(--radius); 
            overflow: hidden; 
            cursor: pointer; 
            border: 1px solid var(--border);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(0,0,0,0.12);
            border-color: transparent;
        }

        /* Görsel slider container */
        .card-image-container {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
            background: var(--muted);
        }

        /* Görsel slider wrapper */
        .card-slider {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-slider img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            flex-shrink: 0;
        }

        /* Slider noktaları */
        .slider-dots {
            position: absolute;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 6px;
            z-index: 10;
        }
        .slider-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            transition: all 0.3s;
            cursor: pointer;
        }
        .slider-dot.active {
            background: #fff;
            transform: scale(1.2);
        }

        /* Kart üst badge */
        .card-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            z-index: 10;
        }
        .card-badge span {
            font-size: 0.625rem;
            font-weight: 700;
            color: #fff;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(8px);
            padding: 0.35rem 0.6rem;
            border-radius: 6px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Kart içerik alanı */
        .card-content {
            padding: 16px;
        }

        .card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .card-name {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--foreground);
            line-height: 1.3;
            letter-spacing: -0.01em;
        }

        .card-code {
            font-size: 0.6875rem;
            font-weight: 600;
            color: var(--muted-foreground);
            background: var(--muted);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            white-space: nowrap;
        }

        .card-specs {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .card-spec {
            font-size: 0.75rem;
            color: var(--muted-foreground);
        }

        .card-spec-dot {
            width: 3px;
            height: 3px;
            background: var(--border);
            border-radius: 50%;
        }

        .card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        .card-price {
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--foreground);
        }

        .card-category {
            font-size: 0.625rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--muted-foreground);
            background: var(--muted);
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
        }

        /* Detail Page */
        .detail-page { display: none; min-height: 100vh; background: var(--background); }
        .detail-page.active { display: block; }
        .detail-header {
            position: fixed; top: 0; left: 0; right: 0; height: var(--header-height); padding: 0 var(--sides);
            display: flex; align-items: center; justify-content: space-between; z-index: 100;
            background: rgba(250, 250, 250, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border);
        }
        .back-btn {
            display: flex; align-items: center; gap: 0.5rem; font-size: 0.8125rem; font-weight: 600;
            color: var(--foreground); background: none; border: none; cursor: pointer; opacity: 0.6;
            transition: opacity 0.2s; padding: 0.5rem 0.75rem; border-radius: var(--radius);
        }
        .back-btn:hover { opacity: 1; }
        .detail-content { display: flex; min-height: 100vh; }
        .detail-info {
            width: 440px; flex-shrink: 0; height: 100vh; position: sticky; top: 0;
            padding: var(--sides); padding-top: calc(var(--header-height) + 32px); overflow-y: auto;
            border-right: 1px solid var(--border);
        }
        .detail-breadcrumb { display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem; color: var(--muted-foreground); margin-bottom: 2rem; }
        .detail-title { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; letter-spacing: -0.03em; line-height: 1.1; }
        .detail-code { font-size: 0.875rem; color: var(--muted-foreground); font-weight: 500; margin-bottom: 1.5rem; }
        .detail-desc { font-size: 0.9375rem; color: var(--foreground); line-height: 1.7; margin-bottom: 2.5rem; opacity: 0.9; }
        .section-label { font-size: 0.6875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted-foreground); margin-bottom: 1rem; }
        
        /* Specs Grid */
        .specs-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 2.5rem; }
        .spec-box { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 1rem; }
        .spec-val { font-size: 1rem; font-weight: 600; margin-bottom: 0.25rem; }
        .spec-label { font-size: 0.6875rem; color: var(--muted-foreground); }

        /* Gallery */
        .detail-gallery { flex: 1; padding: var(--sides); padding-top: calc(var(--header-height) + 24px); background: #fff; }
        .gallery-main { width: 100%; aspect-ratio: 1; object-fit: contain; margin-bottom: 1.5rem; mix-blend-mode: multiply; }
        .gallery-thumbs { display: flex; gap: 1rem; overflow-x: auto; padding-bottom: 1rem; }
        .gallery-thumb {
            width: 80px; height: 80px; object-fit: cover; border-radius: 6px; cursor: pointer;
            border: 1px solid var(--border); opacity: 0.6; transition: all 0.2s;
        }
        .gallery-thumb:hover, .gallery-thumb.active { opacity: 1; border-color: var(--foreground); }

        /* Footer */
        .footer { background: var(--foreground); color: var(--background); padding: 5rem var(--sides); margin-top: auto; }
        .footer-logo { font-size: 3rem; font-weight: 700; letter-spacing: -0.03em; margin-bottom: 1.5rem; }
        .footer-desc { font-size: 0.9375rem; opacity: 0.7; line-height: 1.6; max-width: 400px; margin-bottom: 3rem; }
        .footer-bottom { display: flex; justify-content: space-between; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1); opacity: 0.5; font-size: 0.75rem; }

        /* Loading */
        .loading { display: flex; justify-content: center; padding: 4rem; width: 100%; grid-column: 1 / -1; }
        .spinner { width: 24px; height: 24px; border: 2px solid var(--border); border-top-color: var(--foreground); border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Responsive - Daha fazla kart, küçük yazı */
        @media (max-width: 1400px) {
            .product-grid { grid-template-columns: repeat(4, 1fr); gap: 12px; }
        }
        @media (max-width: 1200px) {
            .product-grid { grid-template-columns: repeat(3, 1fr); gap: 12px; }
            .sidebar { width: 240px; }
        }
        @media (max-width: 1024px) {
            .sidebar { width: 220px; }
            .detail-info { width: 380px; }
        }
        @media (max-width: 768px) {
            :root { --sides: 12px; --header-height: 64px; }
            .nav-list { display: none; }
            .mobile-menu-btn { display: flex; }
            .sidebar { display: none; }
            .layout { display: block; }
            
            /* Tablet: 3 kart */
            .product-grid { grid-template-columns: repeat(3, 1fr); gap: 8px; }
            
            /* Mobilde küçük yazı */
            .card-name { font-size: 0.75rem; }
            .card-code { font-size: 0.5625rem; padding: 0.2rem 0.4rem; }
            .card-spec { font-size: 0.625rem; }
            .card-price { font-size: 0.75rem; }
            .card-category { font-size: 0.5rem; padding: 0.2rem 0.4rem; }
            .card-content { padding: 10px; }
            .card-footer { padding-top: 8px; }
            .slider-dot { width: 5px; height: 5px; }
            .slider-dots { bottom: 8px; gap: 4px; }
            .card-badge span { font-size: 0.5rem; padding: 0.25rem 0.4rem; }
            
            .detail-content { flex-direction: column; }
            .detail-gallery { order: 1; padding-top: calc(var(--header-height) + 16px); padding-bottom: 0; }
            .detail-info { order: 2; width: 100%; height: auto; position: static; border-right: none; padding-top: 1rem; }
            .gallery-main { aspect-ratio: 4/3; object-fit: cover; }
            .footer { padding: 3rem var(--sides); }
        }
        @media (max-width: 480px) {
            /* Mobil: 2 kart */
            .product-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
            .card-name { font-size: 0.6875rem; }
            .card-specs { gap: 4px; margin-bottom: 8px; }
            .card-spec { font-size: 0.5625rem; }
            .card-spec-dot { width: 2px; height: 2px; }
            .card-content { padding: 8px; }
            .card-header { margin-bottom: 4px; }
            .card-footer { padding-top: 6px; }
            .card-price { font-size: 0.6875rem; }
        }

        /* Touch swipe için mobil stil */
        @media (hover: none) and (pointer: coarse) {
            .card-slider {
                scroll-snap-type: x mandatory;
                overflow-x: auto;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            .card-slider::-webkit-scrollbar { display: none; }
            .card-slider img {
                scroll-snap-align: start;
            }
        }
    </style>
</head>
<body>

<div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-header">
        <a href="#" class="logo" style="color:var(--background)" onclick="WatchApp.goHome()">MERIDIAN</a>
    </div>
    <div class="mobile-menu-content">
        <div class="mobile-menu-category" data-tr="Koleksiyonlar" data-en="Collections">Koleksiyonlar</div>
        <nav>
            <ul class="mobile-menu-nav" id="mobileMenuNav"></ul>
        </nav>
    </div>
</div>

<header class="header">
    <a href="#" class="logo ripple-container" onclick="createRipple(event); WatchApp.goHome()">MERIDIAN</a>
    <nav class="nav">
        <ul class="nav-list">
            <li><a href="#" class="nav-link active" onclick="WatchApp.goHome()" data-tr="Saatler" data-en="Timepieces">Saatler</a></li>
            <li><a href="#footer" class="nav-link" data-tr="Atölye" data-en="Atelier">Atölye</a></li>
        </ul>
        <div class="lang-switch">
            <button class="lang-btn active ripple-container" onclick="createRipple(event); WatchApp.setLang('tr')">TR</button>
            <button class="lang-btn ripple-container" onclick="createRipple(event); WatchApp.setLang('en')">EN</button>
        </div>
        <button class="mobile-menu-btn ripple-container" id="mobileMenuBtn" onclick="createRipple(event); WatchApp.toggleMobileMenu()">
            <span></span><span></span><span></span>
        </button>
    </nav>
</header>

<div class="home-page" id="homePage">
    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-title" data-tr="Kategoriye Göre" data-en="By Category">Kategoriye Göre</div>
            <ul class="filter-list" id="filterList"></ul>
            
            <div class="sidebar-title" style="margin-top: 2rem;" data-tr="Materyal" data-en="Material">Materyal</div>
            <ul class="filter-list" id="materialFilterList"></ul>
        </aside>

        <main class="main">
            <div class="product-grid" id="productGrid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </main>
    </div>

    <footer class="footer" id="footer">
        <div class="footer-brand">
            <div class="footer-logo">MERIDIAN</div>
            <p class="footer-desc" data-tr="Zamanın ötesinde bir işçilik. 1974'ten beri İsviçre hassasiyetiyle üretilen başyapıtlar." data-en="Craftsmanship beyond time. Masterpieces crafted with Swiss precision since 1974.">
                Zamanın ötesinde bir işçilik. 1974'ten beri İsviçre hassasiyetiyle üretilen başyapıtlar.
            </p>
        </div>
        <div class="footer-bottom">
            <span>© 2025 MERIDIAN HOROLOGY SA.</span>
            <span>GENEVA • ISTANBUL • NEW YORK</span>
        </div>
    </footer>
</div>

<div id="detailPages"></div>

<script>
    function createRipple(event) {
        const element = event.currentTarget;
        const existing = element.querySelector('.ripple');
        if (existing) existing.remove();
        
        const rect = element.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = event.clientX - rect.left - size / 2;
        const y = event.clientY - rect.top - size / 2;
        
        const ripple = document.createElement('span');
        ripple.className = 'ripple';
        ripple.style.width = ripple.style.height = `${size}px`;
        ripple.style.left = `${x}px`;
        ripple.style.top = `${y}px`;
        
        element.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);
    }

    class WatchStore {
        constructor() {
            this.state = {
                lang: 'tr',
                filter: 'all',
                activeDetail: null
            };

            this.categories = {
                "CAT-DIV": { tr: "Dalgıç", en: "Diver" },
                "CAT-DRS": { tr: "Klasik", en: "Dress" },
                "CAT-PLT": { tr: "Pilot", en: "Pilot" },
                "CAT-CHR": { tr: "Kronograf", en: "Chronograph" }
            };

            this.materials = {
                "MAT-STL": { tr: "Çelik", en: "Steel" },
                "MAT-TIT": { tr: "Titanyum", en: "Titanium" },
                "MAT-GLD": { tr: "18K Altın", en: "18K Gold" },
                "MAT-CER": { tr: "Seramik", en: "Ceramic" },
                "MAT-LTR": { tr: "Deri", en: "Leather" }
            };

            this.products = [
                {
                    id: "meridian-abyss",
                    code: "REF. 7002-A",
                    name: "Abyss Deep Diver",
                    category: "CAT-DIV",
                    material: "MAT-TIT",
                    price: "₺142,000",
                    desc: {
                        tr: "Profesyonel dalgıçlar için tasarlanan Abyss, 5. Sınıf Titanyum kasası ve helyum valfi ile 300 metreye kadar su geçirmezlik sunar.",
                        en: "Designed for professional divers, Abyss offers water resistance up to 300 meters with its Grade 5 Titanium case and helium valve."
                    },
                    specs: { case: "42mm", thick: "13.5mm", move: "Caliber M-05 Auto", water: "30 ATM" },
                    images: [
                        "https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?w=800&q=80",
                        "https://images.unsplash.com/photo-1533139323819-e5e29796e47f?w=800&q=80",
                        "https://images.unsplash.com/photo-1524592094714-0f0654e20314?w=800&q=80"
                    ]
                },
                {
                    id: "meridian-legacy",
                    code: "REF. 1904-L",
                    name: "Legacy Perpetual",
                    category: "CAT-DRS",
                    material: "MAT-GLD",
                    price: "₺385,000",
                    desc: {
                        tr: "Legacy koleksiyonu, markanın mirasını 18K Rose Gold kasa ve el yapımı timsah derisi kayış ile taçlandırıyor.",
                        en: "The Legacy collection crowns the brand's heritage with an 18K Rose Gold case and handmade alligator strap."
                    },
                    specs: { case: "39mm", thick: "9.8mm", move: "Manual Wind", water: "5 ATM" },
                    images: [
                        "https://images.unsplash.com/photo-1547996160-71df45efd2f7?w=800&q=80",
                        "https://images.unsplash.com/photo-1619134778706-c27e061c34df?w=800&q=80",
                        "https://images.unsplash.com/photo-1509048191080-d2984bad6ae5?w=800&q=80"
                    ]
                },
                {
                    id: "meridian-aero",
                    code: "REF. 5500-P",
                    name: "Aero GMT Master",
                    category: "CAT-PLT",
                    material: "MAT-STL",
                    price: "₺115,000",
                    desc: {
                        tr: "Havacılık tarihinden ilham alan Aero GMT, çift zaman dilimi göstergesi ve döner seramik bezeli ile sık seyahat edenler için vazgeçilmez.",
                        en: "Inspired by aviation history, Aero GMT is an indispensable companion for frequent travelers."
                    },
                    specs: { case: "44mm", thick: "14mm", move: "GMT Automatic", water: "10 ATM" },
                    images: [
                        "https://images.unsplash.com/photo-1524592094714-0f0654e20314?w=800&q=80",
                        "https://images.unsplash.com/photo-1623998021446-45cd96e318cf?w=800&q=80",
                        "https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?w=800&q=80"
                    ]
                },
                {
                    id: "meridian-chrono",
                    code: "REF. 8800-C",
                    name: "Speedway Chrono",
                    category: "CAT-CHR",
                    material: "MAT-STL",
                    price: "₺168,000",
                    desc: {
                        tr: "Yarış pistlerinin heyecanını bileğinize taşıyan Speedway, sportif lüksün tanımıdır.",
                        en: "Bringing the excitement of racetracks to your wrist, Speedway is the definition of sporty luxury."
                    },
                    specs: { case: "41mm", thick: "12mm", move: "Auto Chronograph", water: "10 ATM" },
                    images: [
                        "https://images.unsplash.com/photo-1523170335258-f5ed11844a49?w=800&q=80",
                        "https://images.unsplash.com/photo-1614164185128-e4ec99c436d7?w=800&q=80",
                        "https://images.unsplash.com/photo-1547996160-71df45efd2f7?w=800&q=80"
                    ]
                },
                {
                    id: "meridian-phantom",
                    code: "REF. 0000-X",
                    name: "Phantom Black",
                    category: "CAT-DIV",
                    material: "MAT-CER",
                    price: "₺195,000",
                    desc: {
                        tr: "Tamamen siyah seramikten üretilen Phantom, çizilmelere karşı ultra dayanıklıdır.",
                        en: "Crafted entirely from black ceramic, Phantom is ultra-resistant to scratches."
                    },
                    specs: { case: "43mm", thick: "11mm", move: "Caliber M-01", water: "20 ATM" },
                    images: [
                        "https://images.unsplash.com/photo-1620625515032-608130563da6?w=800&q=80",
                        "https://images.unsplash.com/photo-1622434641406-a158123450f9?w=800&q=80",
                        "https://images.unsplash.com/photo-1533139323819-e5e29796e47f?w=800&q=80"
                    ]
                },
                {
                    id: "meridian-nocturne",
                    code: "REF. 3030-N",
                    name: "Nocturne Elegance",
                    category: "CAT-DRS",
                    material: "MAT-LTR",
                    price: "₺85,000",
                    desc: {
                        tr: "Gece davetleri için mükemmel bir seçim. Zarafeti temsil eder.",
                        en: "A perfect choice for evening events. Represents elegance."
                    },
                    specs: { case: "38mm", thick: "8.5mm", move: "Quartz Precision", water: "3 ATM" },
                    images: [
                        "https://images.unsplash.com/photo-1509048191080-d2984bad6ae5?w=800&q=80",
                        "https://images.unsplash.com/photo-1548171915-e79a380a2a4b?w=800&q=80",
                        "https://images.unsplash.com/photo-1619134778706-c27e061c34df?w=800&q=80"
                    ]
                }
            ];

            this.hoverIntervals = {};

            this.init();
        }

        init() {
            document.addEventListener('DOMContentLoaded', () => {
                this.renderAll();
                this.checkHash();
                window.addEventListener('popstate', () => this.checkHash());
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') this.goHome();
                });
            });
        }

        renderAll() {
            this.renderFilters();
            this.renderMobileMenu();
            this.renderProducts();
            this.renderDetailPages();
            this.updateLangDOM();
        }

        renderFilters() {
            const list = document.getElementById('filterList');
            const allCount = this.products.length;
            
            let html = `<li><button class="filter-btn ${this.state.filter === 'all' ? 'active' : ''}" onclick="WatchApp.filterBy('all')">
                <span data-tr="Tüm Koleksiyon" data-en="All Collection">${this.state.lang === 'tr' ? 'Tüm Koleksiyon' : 'All Collection'}</span>
                <span class="filter-count">${allCount}</span>
            </button></li>`;

            for (const [key, val] of Object.entries(this.categories)) {
                const count = this.products.filter(p => p.category === key).length;
                if (count > 0) {
                    html += `<li><button class="filter-btn ${this.state.filter === key ? 'active' : ''}" onclick="WatchApp.filterBy('${key}')">
                        <span>${val[this.state.lang]}</span>
                        <span class="filter-count">${count}</span>
                    </button></li>`;
                }
            }
            list.innerHTML = html;
        }

        renderProducts() {
            const grid = document.getElementById('productGrid');
            const filtered = this.state.filter === 'all' 
                ? this.products 
                : this.products.filter(p => p.category === this.state.filter || p.material === this.state.filter);

            grid.innerHTML = filtered.map(p => {
                const dots = p.images.map((_, i) => 
                    `<span class="slider-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></span>`
                ).join('');

                const images = p.images.map(img => 
                    `<img src="${img}" loading="lazy" alt="${p.name}">`
                ).join('');

                return `
                <article class="product-card" data-id="${p.id}" onclick="WatchApp.openDetail('${p.id}')">
                    <div class="card-image-container">
                        <div class="card-badge">
                            <span>${this.categories[p.category][this.state.lang]}</span>
                        </div>
                        <div class="card-slider" data-product="${p.id}">
                            ${images}
                        </div>
                        <div class="slider-dots" data-product="${p.id}">
                            ${dots}
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="card-header">
                            <div class="card-name">${p.name}</div>
                            <span class="card-code">${p.code}</span>
                        </div>
                        <div class="card-specs">
                            <span class="card-spec">${p.specs.case}</span>
                            <span class="card-spec-dot"></span>
                            <span class="card-spec">${p.specs.move}</span>
                        </div>
                        <div class="card-footer">
                            <span class="card-price">${p.price}</span>
                            <span class="card-category">${this.materials[p.material][this.state.lang]}</span>
                        </div>
                    </div>
                </article>`;
            }).join('');

            this.initCardSliders();
        }

        initCardSliders() {
            const cards = document.querySelectorAll('.product-card');
            const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

            cards.forEach(card => {
                const productId = card.dataset.id;
                const slider = card.querySelector('.card-slider');
                const dots = card.querySelectorAll('.slider-dot');
                const product = this.products.find(p => p.id === productId);
                const imageCount = product.images.length;

                let currentIndex = 0;

                // Mobilde swipe
                if (isTouchDevice) {
                    let startX = 0;
                    let scrollLeft = 0;

                    slider.addEventListener('touchstart', (e) => {
                        startX = e.touches[0].pageX;
                        scrollLeft = slider.scrollLeft;
                    }, { passive: true });

                    slider.addEventListener('touchend', (e) => {
                        const endX = e.changedTouches[0].pageX;
                        const diff = startX - endX;
                        const threshold = 50;

                        if (Math.abs(diff) > threshold) {
                            if (diff > 0 && currentIndex < imageCount - 1) {
                                currentIndex++;
                            } else if (diff < 0 && currentIndex > 0) {
                                currentIndex--;
                            }
                            this.slideToIndex(slider, dots, currentIndex);
                        }
                    }, { passive: true });

                    // Scroll ile de senkronize et
                    slider.addEventListener('scroll', () => {
                        const width = slider.offsetWidth;
                        const newIndex = Math.round(slider.scrollLeft / width);
                        if (newIndex !== currentIndex) {
                            currentIndex = newIndex;
                            dots.forEach((dot, i) => {
                                dot.classList.toggle('active', i === currentIndex);
                            });
                        }
                    }, { passive: true });
                } else {
                    // Desktop: hover ile otomatik geçiş
                    card.addEventListener('mouseenter', () => {
                        this.hoverIntervals[productId] = setInterval(() => {
                            currentIndex = (currentIndex + 1) % imageCount;
                            this.slideToIndex(slider, dots, currentIndex);
                        }, 1200);
                    });

                    card.addEventListener('mouseleave', () => {
                        if (this.hoverIntervals[productId]) {
                            clearInterval(this.hoverIntervals[productId]);
                            delete this.hoverIntervals[productId];
                        }
                        currentIndex = 0;
                        this.slideToIndex(slider, dots, 0);
                    });
                }

                // Dot'lara tıklama
                dots.forEach((dot, i) => {
                    dot.addEventListener('click', (e) => {
                        e.stopPropagation();
                        currentIndex = i;
                        this.slideToIndex(slider, dots, i);
                    });
                });
            });
        }

        slideToIndex(slider, dots, index) {
            const width = slider.offsetWidth;
            slider.style.transform = `translateX(-${index * width}px)`;
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }

        renderDetailPages() {
            const container = document.getElementById('detailPages');
            container.innerHTML = this.products.map(p => {
                const thumbs = p.images.map((img, i) => 
                    `<img src="${img}" class="gallery-thumb ${i===0?'active':''}" onclick="WatchApp.changeImage('main-${p.id}', '${img}', this)">`
                ).join('');

                return `
                <div class="detail-page" id="${p.id}">
                    <header class="detail-header">
                        <button class="back-btn" onclick="WatchApp.goHome()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            <span data-tr="Koleksiyona Dön" data-en="Back to Collection">${this.state.lang==='tr'?'Koleksiyona Dön':'Back to Collection'}</span>
                        </button>
                        <span class="logo" style="font-size:1rem">${p.code}</span>
                        <div style="width:80px"></div>
                    </header>
                    <div class="detail-content">
                        <aside class="detail-info">
                            <div class="detail-breadcrumb">
                                <span>MERIDIAN</span> / <span>${this.categories[p.category][this.state.lang]}</span>
                            </div>
                            <h1 class="detail-title">${p.name}</h1>
                            <div class="detail-code">${p.price}</div>
                            <p class="detail-desc">${p.desc[this.state.lang]}</p>
                            
                            <div class="section-label" data-tr="Teknik Özellikler" data-en="Technical Specs">${this.state.lang==='tr'?'Teknik Özellikler':'Technical Specs'}</div>
                            <div class="specs-grid">
                                <div class="spec-box"><div class="spec-val">${p.specs.case}</div><div class="spec-label" data-tr="Kasa Çapı" data-en="Case Diameter">${this.state.lang==='tr'?'Kasa Çapı':'Case Diameter'}</div></div>
                                <div class="spec-box"><div class="spec-val">${p.specs.thick}</div><div class="spec-label" data-tr="Kalınlık" data-en="Thickness">${this.state.lang==='tr'?'Kalınlık':'Thickness'}</div></div>
                                <div class="spec-box"><div class="spec-val">${p.specs.water}</div><div class="spec-label" data-tr="Su Geçirmezlik" data-en="Water Resist">${this.state.lang==='tr'?'Su Geçirmezlik':'Water Resist'}</div></div>
                                <div class="spec-box"><div class="spec-val">${this.materials[p.material][this.state.lang]}</div><div class="spec-label" data-tr="Materyal" data-en="Material">${this.state.lang==='tr'?'Materyal':'Material'}</div></div>
                            </div>
                        </aside>
                        <div class="detail-gallery">
                            <img src="${p.images[0]}" id="main-${p.id}" class="gallery-main">
                            <div class="gallery-thumbs">${thumbs}</div>
                        </div>
                    </div>
                </div>`;
            }).join('');
        }

        renderMobileMenu() {
            const nav = document.getElementById('mobileMenuNav');
            let html = `<li><a href="#" class="mobile-menu-link" onclick="WatchApp.goHome(); WatchApp.filterBy('all')">
                ${this.state.lang==='tr'?'Tümü':'All Collection'}
            </a></li>`;
            
            for (const [key, val] of Object.entries(this.categories)) {
                html += `<li><a href="#" class="mobile-menu-link" onclick="WatchApp.goHome(); WatchApp.filterBy('${key}')">
                    ${val[this.state.lang]}
                </a></li>`;
            }
            nav.innerHTML = html;
        }

        filterBy(key) {
            this.state.filter = key;
            this.renderFilters();
            this.renderProducts();
            this.closeMobileMenu();
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        setLang(lang) {
            this.state.lang = lang;
            document.documentElement.lang = lang;
            this.updateLangDOM();
            this.renderAll();
        }

        updateLangDOM() {
            document.querySelectorAll('[data-' + this.state.lang + ']').forEach(el => {
                el.textContent = el.getAttribute('data-' + this.state.lang);
            });
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent.toLowerCase() === this.state.lang);
            });
        }

        openDetail(id) {
            document.getElementById('homePage').style.display = 'none';
            document.querySelectorAll('.detail-page').forEach(el => el.classList.remove('active'));
            const target = document.getElementById(id);
            if(target) {
                target.classList.add('active');
                this.state.activeDetail = id;
                window.scrollTo(0,0);
                history.pushState({id}, '', `#${id}`);
            }
        }

        goHome() {
            document.getElementById('homePage').style.display = 'block';
            document.querySelectorAll('.detail-page').forEach(el => el.classList.remove('active'));
            this.state.activeDetail = null;
            history.pushState(null, '', window.location.pathname);
            window.scrollTo(0,0);
            this.closeMobileMenu();
        }

        changeImage(mainId, src, thumb) {
            const main = document.getElementById(mainId);
            main.style.opacity = 0;
            setTimeout(() => {
                main.src = src;
                main.style.opacity = 1;
            }, 150);
            
            thumb.parentElement.querySelectorAll('.gallery-thumb').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
        }

        toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const btn = document.getElementById('mobileMenuBtn');
            const isActive = menu.classList.contains('active');
            if(isActive) this.closeMobileMenu(); else {
                menu.classList.add('active');
                btn.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        closeMobileMenu() {
            document.getElementById('mobileMenu').classList.remove('active');
            document.getElementById('mobileMenuBtn').classList.remove('active');
            document.body.style.overflow = '';
        }

        checkHash() {
            const hash = window.location.hash.slice(1);
            if(hash && document.getElementById(hash)) this.openDetail(hash);
            else this.goHome();
        }
    }

    const WatchApp = new WatchStore();
</script>
</body>
</html>
