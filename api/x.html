<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MERIDIAN | Horology Collection</title>
    <meta name="description" content="Mühendislik ve estetiğin buluştuğu lüks saat koleksiyonu.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }

        :root {
            --background: #FAFAFA;
            --foreground: #171717;
            --card: #FFFFFF;
            --muted: #F5F5F5;
            --muted-foreground: #737373;
            --border: #E5E5E5;
            --radius: 12px;
            --sides: 24px;
            --header-height: 72px;
            --ripple-color: rgba(23, 23, 23, 0.15);
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--background);
            color: var(--foreground);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        /* Ripple Effects */
        .ripple-container { position: relative; overflow: hidden; }
        .ripple {
            position: absolute; border-radius: 50%; background: var(--ripple-color);
            transform: scale(0); animation: ripple-animation 0.6s ease-out forwards; pointer-events: none;
        }
        @keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }
        .ripple-light { --ripple-color: rgba(23, 23, 23, 0.12); }
        .ripple-dark { --ripple-color: rgba(255, 255, 255, 0.25); }

        /* Header */
        .header {
            position: fixed; top: 0; left: 0; right: 0; height: var(--header-height);
            padding: 0 var(--sides); display: flex; align-items: center; justify-content: space-between;
            z-index: 1000; background: linear-gradient(to bottom, var(--background) 0%, var(--background) 85%, transparent 100%);
        }
        .logo { font-size: 1.5rem; font-weight: 700; letter-spacing: -0.03em; text-decoration: none; color: var(--foreground); }
        .nav { display: flex; align-items: center; gap: 1.5rem; }
        .nav-list { display: flex; align-items: center; gap: 1.5rem; list-style: none; }
        .nav-link {
            font-size: 0.8125rem; font-weight: 600; text-transform: uppercase; text-decoration: none;
            color: var(--foreground); opacity: 0.5; transition: opacity 0.2s; letter-spacing: 0.02em;
            padding: 0.5rem 0.75rem; border-radius: var(--radius);
        }
        .nav-link:hover, .nav-link.active { opacity: 1; }
        
        /* Language Switcher */
        .lang-switch { display: flex; background: var(--card); border-radius: 4px; overflow: hidden; border: 1px solid var(--border); }
        .lang-btn {
            padding: 0.375rem 0.625rem; font-size: 0.75rem; font-weight: 600; background: none;
            border: none; cursor: pointer; opacity: 0.4; transition: all 0.2s; position: relative; overflow: hidden;
        }
        .lang-btn.active { background: var(--foreground); color: var(--background); opacity: 1; }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none; width: 40px; height: 40px; background: var(--card); border: 1px solid var(--border);
            border-radius: 6px; cursor: pointer; flex-direction: column; align-items: center;
            justify-content: center; gap: 5px; transition: all 0.3s ease; position: relative; z-index: 10001; overflow: hidden;
        }
        .mobile-menu-btn span { width: 18px; height: 2px; background: var(--foreground); border-radius: 1px; transition: all 0.4s; }
        .mobile-menu-btn.active { background: transparent; border-color: transparent; }
        .mobile-menu-btn.active span { background: var(--background); }
        .mobile-menu-btn.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
        .mobile-menu-btn.active span:nth-child(2) { opacity: 0; transform: scaleX(0); }
        .mobile-menu-btn.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

        /* Fullscreen Mobile Menu */
        .mobile-menu {
            position: fixed; inset: 0; z-index: 10000; background: var(--foreground);
            display: flex; flex-direction: column; clip-path: circle(0% at calc(100% - 44px) 36px);
            transition: clip-path 0.7s cubic-bezier(0.4, 0, 0.2, 1); visibility: hidden;
        }
        .mobile-menu.active { clip-path: circle(150% at calc(100% - 44px) 36px); visibility: visible; }
        .mobile-menu-header { height: var(--header-height); display: flex; align-items: center; justify-content: space-between; padding: 0 var(--sides); }
        .mobile-menu-logo { font-size: 1.5rem; font-weight: 700; color: var(--background); text-decoration: none; opacity: 0; transform: translateX(-20px); transition: all 0.5s 0.3s; }
        .mobile-menu.active .mobile-menu-logo { opacity: 1; transform: translateX(0); }
        .mobile-menu-content { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 2rem var(--sides); overflow-y: auto; }
        .mobile-menu-category { font-size: 0.6875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.15em; color: rgba(255,255,255,0.4); margin-bottom: 2rem; opacity: 0; transform: translateY(20px); transition: all 0.5s 0.2s; }
        .mobile-menu.active .mobile-menu-category { opacity: 1; transform: translateY(0); }
        .mobile-menu-nav { list-style: none; text-align: center; display: flex; flex-direction: column; gap: 0.5rem; width: 100%; max-width: 320px; }
        .mobile-menu-link {
            display: block; padding: 0.875rem 1.5rem; font-size: 1.125rem; font-weight: 600; text-decoration: none;
            color: var(--background); letter-spacing: -0.01em; border-radius: var(--radius); transform: translateY(40px);
            opacity: 0; transition: transform 0.5s, opacity 0.5s, background 0.2s; position: relative; overflow: hidden;
        }
        .mobile-menu.active .mobile-menu-link { transform: translateY(0); opacity: 1; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(1) .mobile-menu-link { transition-delay: 0.25s; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(2) .mobile-menu-link { transition-delay: 0.3s; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(3) .mobile-menu-link { transition-delay: 0.35s; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(4) .mobile-menu-link { transition-delay: 0.4s; }
        .mobile-menu.active .mobile-menu-nav li:nth-child(5) .mobile-menu-link { transition-delay: 0.45s; }
        .mobile-menu-count { font-size: 0.75rem; font-weight: 500; color: rgba(255,255,255,0.4); margin-left: 0.5rem; }

        /* Layout & Sidebar */
        .layout { display: flex; min-height: 100vh; }
        .sidebar {
            width: 280px; flex-shrink: 0; height: 100vh; position: sticky; top: 0;
            padding: var(--sides); padding-top: calc(var(--header-height) + 24px); overflow-y: auto;
        }
        .sidebar-title { font-size: 0.6875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted-foreground); margin-bottom: 1rem; }
        .filter-list { list-style: none; }
        .filter-btn {
            width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0.75rem 1rem;
            font-size: 0.875rem; font-weight: 500; background: none; border: none; border-radius: var(--radius);
            cursor: pointer; text-align: left; transition: all 0.2s; color: var(--foreground); position: relative; overflow: hidden;
        }
        .filter-btn:hover { background: var(--muted); }
        .filter-btn.active { background: var(--foreground); color: var(--background); }
        .filter-count { font-size: 0.75rem; opacity: 0.5; }
        .main { flex: 1; min-width: 0; padding: calc(var(--header-height) + 24px) var(--sides) var(--sides) var(--sides); }

        /* Carousel */
        .category-carousel-section {
            padding: calc(var(--header-height) + 24px) var(--sides) 2rem;
        }
        .carousel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }
        .carousel-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--muted-foreground);
        }
        .carousel-nav {
            display: flex;
            gap: 8px;
        }
        .carousel-nav-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: var(--card);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .carousel-nav-btn:hover {
            background: var(--foreground);
            color: var(--background);
            border-color: var(--foreground);
            transform: scale(1.05);
        }
        .carousel-nav-btn:active {
            transform: scale(0.95);
        }
        .carousel-nav-btn svg {
            width: 18px;
            height: 18px;
        }
        .category-carousel-wrapper {
            position: relative;
            overflow: hidden;
            border-radius: var(--radius);
        }
        .category-carousel {
            display: flex;
            gap: 20px;
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }
        .category-slide {
            flex: 0 0 calc(25% - 15px);
            position: relative;
            border-radius: var(--radius);
            overflow: hidden;
            cursor: pointer;
            aspect-ratio: 4/3;
            transform: scale(1);
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.4s ease;
        }
        .category-slide:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        .category-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .category-slide:hover img {
            transform: scale(1.1);
        }
        .category-slide-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0.1) 100%);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 2rem;
            transition: background 0.4s ease;
        }
        .category-slide:hover .category-slide-overlay {
            background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.5) 50%, rgba(0,0,0,0.2) 100%);
        }
        .category-slide-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.5rem;
            transform: translateY(0);
            transition: transform 0.4s ease;
        }
        .category-slide:hover .category-slide-title {
            transform: translateY(-4px);
        }
        .category-slide-count {
            font-size: 0.875rem;
            color: rgba(255,255,255,0.7);
            transform: translateY(0);
            transition: transform 0.4s ease 0.05s;
        }
        .category-slide:hover .category-slide-count {
            transform: translateY(-4px);
        }
        .carousel-dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 1.5rem;
        }
        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--border);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .carousel-dot:hover {
            background: var(--muted-foreground);
        }
        .carousel-dot.active {
            background: var(--foreground);
            width: 32px;
            border-radius: 5px;
        }

        /* Kategori Sayfası */
        .category-page {
            display: none;
            min-height: 100vh;
            background: var(--background);
        }
        .category-page.active {
            display: block;
        }
        .category-hero {
            height: 350px;
            position: relative;
            overflow: hidden;
        }
        .category-hero img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .category-hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 2rem var(--sides);
        }
        .category-hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.5rem;
        }
        .category-hero-desc {
            font-size: 1rem;
            color: rgba(255,255,255,0.8);
            max-width: 600px;
        }
        .category-products {
            padding: 2rem var(--sides);
        }
        
        /* Kategori header - üst kısımda sabit nav bar */
        .category-nav-header {
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: rgba(250, 250, 250, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--sides);
            z-index: 100;
        }
        .category-back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--foreground);
            background: var(--muted);
            border: 1px solid var(--border);
            cursor: pointer;
            padding: 0.625rem 1rem;
            border-radius: var(--radius);
            transition: all 0.2s ease;
        }
        .category-back-btn:hover {
            background: var(--foreground);
            color: var(--background);
            border-color: var(--foreground);
        }
        .category-back-btn svg {
            width: 18px;
            height: 18px;
        }
        .category-nav-title {
            font-size: 1rem;
            font-weight: 700;
            letter-spacing: -0.02em;
        }
        .category-nav-spacer {
            width: 120px;
        }

        /* Grid */
        .product-grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 16px; 
        }

        /* Ürün kartları */
        .product-card { 
            position: relative; 
            background: var(--card); 
            border-radius: var(--radius); 
            overflow: hidden; 
            cursor: pointer; 
            border: 1px solid var(--border);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            will-change: transform, box-shadow;
        }
        .product-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 40px rgba(0,0,0,0.12);
            border-color: transparent;
        }

        /* Görsel slider - tamamen yenilenmiş stabil swipe */
        .card-image-container {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
            background: var(--muted);
            touch-action: pan-y pinch-zoom;
            user-select: none;
        }

        .card-slider {
            display: flex;
            width: 100%;
            height: 100%;
            will-change: transform;
        }

        .card-slider.animating {
            transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1);
        }

        .card-slider img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            flex-shrink: 0;
            pointer-events: none;
            user-select: none;
            -webkit-user-drag: none;
        }

        /* Slider noktaları */
        .slider-dots {
            position: absolute;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 6px;
            z-index: 10;
            padding: 6px 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            backdrop-filter: blur(4px);
        }
        .slider-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            transition: all 0.35s cubic-bezier(0.32, 0.72, 0, 1);
            cursor: pointer;
        }
        .slider-dot.active {
            background: #fff;
            width: 18px;
            border-radius: 3px;
        }

        /* Kart içerik alanı */
        .card-content {
            padding: 16px;
        }

        .card-header {
            margin-bottom: 8px;
        }

        .card-name {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--foreground);
            line-height: 1.3;
            letter-spacing: -0.01em;
        }

        .card-specs {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .card-spec {
            font-size: 0.75rem;
            color: var(--muted-foreground);
        }

        .card-spec-dot {
            width: 3px;
            height: 3px;
            background: var(--border);
            border-radius: 50%;
        }

        .card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        .card-price {
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--foreground);
        }

        .card-material {
            font-size: 0.625rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--muted-foreground);
            background: var(--muted);
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
        }

        /* Detail Page */
        .detail-page { display: none; min-height: 100vh; background: var(--background); }
        .detail-page.active { display: block; }
        .detail-header {
            position: fixed; top: 0; left: 0; right: 0; height: var(--header-height); padding: 0 var(--sides);
            display: flex; align-items: center; justify-content: space-between; z-index: 100;
            background: rgba(250, 250, 250, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border);
        }
        .back-btn {
            display: flex; align-items: center; gap: 0.5rem; font-size: 0.8125rem; font-weight: 600;
            color: var(--foreground); background: none; border: none; cursor: pointer; opacity: 0.6;
            transition: opacity 0.2s; padding: 0.5rem 0.75rem; border-radius: var(--radius);
        }
        .back-btn:hover { opacity: 1; }
        .detail-content { display: flex; min-height: 100vh; }
        .detail-info {
            width: 440px; flex-shrink: 0; height: 100vh; position: sticky; top: 0;
            padding: var(--sides); padding-top: calc(var(--header-height) + 32px); overflow-y: auto;
            border-right: 1px solid var(--border);
        }
        .detail-breadcrumb { display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem; color: var(--muted-foreground); margin-bottom: 2rem; }
        .detail-title { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; letter-spacing: -0.03em; line-height: 1.1; }
        .detail-code { font-size: 0.875rem; color: var(--muted-foreground); font-weight: 500; margin-bottom: 1.5rem; }
        .detail-desc { font-size: 0.9375rem; color: var(--foreground); line-height: 1.7; margin-bottom: 2.5rem; opacity: 0.9; }
        .section-label { font-size: 0.6875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted-foreground); margin-bottom: 1rem; }
        
        /* Specs Grid - SVG ikonlu */
        .specs-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 2.5rem; }
        .spec-box { 
            background: var(--card); 
            border: 1px solid var(--border); 
            border-radius: var(--radius); 
            padding: 1.25rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .spec-box:hover {
            border-color: var(--foreground);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }
        .spec-icon {
            width: 48px;
            height: 48px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--muted);
            border-radius: 10px;
        }
        .spec-icon svg {
            width: 28px;
            height: 28px;
            stroke: var(--foreground);
            fill: none;
            stroke-width: 1.5;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        .spec-text {
            flex: 1;
        }
        .spec-val { font-size: 1.125rem; font-weight: 700; margin-bottom: 0.25rem; color: var(--foreground); }
        .spec-label { font-size: 0.75rem; color: var(--muted-foreground); }

        /* Gallery */
        .detail-gallery { flex: 1; padding: var(--sides); padding-top: calc(var(--header-height) + 24px); background: #fff; }
        .gallery-main { width: 100%; aspect-ratio: 1; object-fit: contain; margin-bottom: 1.5rem; mix-blend-mode: multiply; transition: opacity 0.15s; }
        .gallery-thumbs { display: flex; gap: 1rem; overflow-x: auto; padding-bottom: 1rem; }
        .gallery-thumb {
            width: 80px; height: 80px; object-fit: cover; border-radius: 6px; cursor: pointer;
            border: 1px solid var(--border); opacity: 0.6; transition: all 0.2s;
        }
        .gallery-thumb:hover, .gallery-thumb.active { opacity: 1; border-color: var(--foreground); }

        /* Footer */
        .footer { background: var(--foreground); color: var(--background); padding: 5rem var(--sides); margin-top: auto; }
        .footer-logo { font-size: 3rem; font-weight: 700; letter-spacing: -0.03em; margin-bottom: 1.5rem; }
        .footer-desc { font-size: 0.9375rem; opacity: 0.7; line-height: 1.6; max-width: 400px; margin-bottom: 3rem; }
        .footer-bottom { display: flex; justify-content: space-between; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1); opacity: 0.5; font-size: 0.75rem; }

        /* Loading */
        .loading { display: flex; justify-content: center; padding: 4rem; width: 100%; grid-column: 1 / -1; }
        .spinner { width: 24px; height: 24px; border: 2px solid var(--border); border-top-color: var(--foreground); border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Responsive */
        @media (max-width: 1400px) {
            .product-grid { grid-template-columns: repeat(4, 1fr); gap: 12px; }
            .category-slide { flex: 0 0 calc(33.333% - 14px); }
        }
        @media (max-width: 1200px) {
            .product-grid { grid-template-columns: repeat(3, 1fr); gap: 12px; }
            .sidebar { width: 240px; }
            .category-slide { flex: 0 0 calc(50% - 10px); }
        }
        @media (max-width: 1024px) {
            .sidebar { width: 220px; }
            .detail-info { width: 380px; }
        }
        @media (max-width: 768px) {
            :root { --sides: 16px; --header-height: 64px; }
            .nav-list { display: none; }
            .mobile-menu-btn { display: flex; }
            .sidebar { display: none; }
            .layout { display: block; }
            
            .product-grid { grid-template-columns: repeat(3, 1fr); gap: 10px; }
            
            .card-name { font-size: 0.75rem; }
            .card-spec { font-size: 0.625rem; }
            .card-price { font-size: 0.75rem; }
            .card-material { font-size: 0.5rem; padding: 0.2rem 0.4rem; }
            .card-content { padding: 10px; }
            .card-footer { padding-top: 8px; }
            .slider-dot { width: 5px; height: 5px; }
            .slider-dot.active { width: 14px; }
            .slider-dots { bottom: 8px; gap: 4px; padding: 4px 8px; }
            
            /* Carousel mobilde */
            .category-carousel-wrapper {
                margin: 0 calc(-1 * var(--sides));
                border-radius: 0;
            }
            .category-carousel { 
                gap: 0;
                scroll-snap-type: x mandatory;
                overflow-x: auto;
                scrollbar-width: none;
                -ms-overflow-style: none;
                -webkit-overflow-scrolling: touch;
            }
            .category-carousel::-webkit-scrollbar { display: none; }
            .category-slide { 
                flex: 0 0 100%; 
                aspect-ratio: 16/10;
                scroll-snap-align: start;
                scroll-snap-stop: always;
                border-radius: 0;
            }
            .carousel-nav { display: none; }
            .category-carousel-section { padding-top: calc(var(--header-height) + 16px); padding-bottom: 1.5rem; }
            .carousel-title { font-size: 0.625rem; }
            .category-slide-title { font-size: 1.375rem; }
            .category-slide-count { font-size: 0.8125rem; }
            .category-slide-overlay { padding: 1.5rem; }
            .carousel-dot { width: 8px; height: 8px; }
            .carousel-dot.active { width: 24px; }
            
            .category-hero { height: 220px; }
            .category-hero-title { font-size: 1.75rem; }
            .category-hero-desc { font-size: 0.875rem; }
            .category-nav-header { height: 56px; }
            .category-back-btn { padding: 0.5rem 0.75rem; font-size: 0.75rem; }
            .category-back-btn svg { width: 16px; height: 16px; }
            .category-nav-title { font-size: 0.875rem; }
            .category-nav-spacer { width: 80px; }
            
            .specs-grid { grid-template-columns: 1fr; }
            .spec-box { padding: 1rem; }
            .spec-icon { width: 40px; height: 40px; }
            .spec-icon svg { width: 22px; height: 22px; }
            .spec-val { font-size: 1rem; }
            
            .detail-content { flex-direction: column; }
            .detail-gallery { order: 1; padding-top: calc(var(--header-height) + 16px); padding-bottom: 0; }
            .detail-info { order: 2; width: 100%; height: auto; position: static; border-right: none; padding-top: 1rem; }
            .gallery-main { aspect-ratio: 4/3; object-fit: cover; }
            .footer { padding: 3rem var(--sides); }
        }
        @media (max-width: 480px) {
            :root { --sides: 12px; }
            .product-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
            .card-name { font-size: 0.6875rem; }
            .card-specs { gap: 4px; margin-bottom: 8px; }
            .card-spec { font-size: 0.5625rem; }
            .card-spec-dot { width: 2px; height: 2px; }
            .card-content { padding: 8px; }
            .card-header { margin-bottom: 4px; }
            .card-footer { padding-top: 6px; }
            .card-price { font-size: 0.6875rem; }
            
            .category-slide { aspect-ratio: 16/9; }
            .category-slide-title { font-size: 1.125rem; }
        }
    </style>
</head>
<body>

<div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-header">
        <a href="#" class="logo" style="color:var(--background)" onclick="WatchApp.goHome()">MERIDIAN</a>
    </div>
    <div class="mobile-menu-content">
        <div class="mobile-menu-category" data-tr="Koleksiyonlar" data-en="Collections">Koleksiyonlar</div>
        <nav>
            <ul class="mobile-menu-nav" id="mobileMenuNav"></ul>
        </nav>
    </div>
</div>

<header class="header">
    <a href="#" class="logo ripple-container" onclick="createRipple(event); WatchApp.goHome()">MERIDIAN</a>
    <nav class="nav">
        <ul class="nav-list">
            <li><a href="#" class="nav-link active" onclick="WatchApp.goHome()" data-tr="Saatler" data-en="Timepieces">Saatler</a></li>
            <li><a href="#footer" class="nav-link" data-tr="Atölye" data-en="Atelier">Atölye</a></li>
        </ul>
        <div class="lang-switch">
            <button class="lang-btn active ripple-container" onclick="createRipple(event); WatchApp.setLang('tr')">TR</button>
            <button class="lang-btn ripple-container" onclick="createRipple(event); WatchApp.setLang('en')">EN</button>
        </div>
        <button class="mobile-menu-btn ripple-container" id="mobileMenuBtn" onclick="createRipple(event); WatchApp.toggleMobileMenu()">
            <span></span><span></span><span></span>
        </button>
    </nav>
</header>

<div class="home-page" id="homePage">
    <!-- Kategori Carousel -->
    <section class="category-carousel-section">
        <div class="carousel-header">
            <span class="carousel-title" data-tr="Koleksiyonları Keşfet" data-en="Explore Collections">Koleksiyonları Keşfet</span>
            <div class="carousel-nav">
                <button class="carousel-nav-btn" onclick="WatchApp.slideCarousel(-1)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                </button>
                <button class="carousel-nav-btn" onclick="WatchApp.slideCarousel(1)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                </button>
            </div>
        </div>
        <div class="category-carousel-wrapper">
            <div class="category-carousel" id="categoryCarousel"></div>
        </div>
        <div class="carousel-dots" id="carouselDots"></div>
    </section>

    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-title" data-tr="Kategoriye Göre" data-en="By Category">Kategoriye Göre</div>
            <ul class="filter-list" id="filterList"></ul>
            
            <div class="sidebar-title" style="margin-top: 2rem;" data-tr="Materyal" data-en="Material">Materyal</div>
            <ul class="filter-list" id="materialFilterList"></ul>
        </aside>

        <main class="main">
            <div class="product-grid" id="productGrid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </main>
    </div>

    <footer class="footer" id="footer">
        <div class="footer-brand">
            <div class="footer-logo">MERIDIAN</div>
            <p class="footer-desc" data-tr="Zamanın ötesinde bir işçilik. 1974'ten beri İsviçre hassasiyetiyle üretilen başyapıtlar." data-en="Craftsmanship beyond time. Masterpieces crafted with Swiss precision since 1974.">
                Zamanın ötesinde bir işçilik. 1974'ten beri İsviçre hassasiyetiyle üretilen başyapıtlar.
            </p>
        </div>
        <div class="footer-bottom">
            <span>© 2025 MERIDIAN HOROLOGY SA.</span>
            <span>GENEVA • ISTANBUL • NEW YORK</span>
        </div>
    </footer>
</div>

<!-- Kategori Sayfaları Container -->
<div id="categoryPages"></div>

<div id="detailPages"></div>

<script>
    function createRipple(event) {
        const element = event.currentTarget;
        const existing = element.querySelector('.ripple');
        if (existing) existing.remove();
        
        const rect = element.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = event.clientX - rect.left - size / 2;
        const y = event.clientY - rect.top - size / 2;
        
        const ripple = document.createElement('span');
        ripple.className = 'ripple';
        ripple.style.width = ripple.style.height = `${size}px`;
        ripple.style.left = `${x}px`;
        ripple.style.top = `${y}px`;
        
        element.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);
    }

    class WatchStore {
        constructor() {
            this.state = {
                lang: 'tr',
                filter: 'all',
                activeDetail: null,
                activeCategory: null,
                carouselIndex: 0
            };

            this.categories = {
                "CAT-DIV": { 
                    tr: "Dalgıç", 
                    en: "Diver",
                    desc: {
                        tr: "Profesyonel dalgıçlar için tasarlanan, yüksek su geçirmezlik özellikli saatler.",
                        en: "High water resistance watches designed for professional divers."
                    },
                    image: "https://images.unsplash.com/photo-1547996160-71df45efd2f7?w=800&q=80"
                },
                "CAT-DRS": { 
                    tr: "Klasik", 
                    en: "Dress",
                    desc: {
                        tr: "Zarif tasarımları ve ince profilleriyle özel günler için ideal saatler.",
                        en: "Elegant designs with slim profiles, ideal for special occasions."
                    },
                    image: "https://images.unsplash.com/photo-1509048191080-d2984bad6ae5?w=800&q=80"
                },
                "CAT-PLT": { 
                    tr: "Pilot", 
                    en: "Pilot",
                    desc: {
                        tr: "Havacılık tarihinden ilham alan, büyük kadran ve kolay okunabilir saatler.",
                        en: "Aviation-inspired watches with large dials and easy readability."
                    },
                    image: "https://images.unsplash.com/photo-1524592094714-0f0654e20314?w=800&q=80"
                },
                "CAT-CHR": { 
                    tr: "Kronograf", 
                    en: "Chronograph",
                    desc: {
                        tr: "Hassas zamanlama fonksiyonlarına sahip sportif kronograf saatler.",
                        en: "Sporty chronograph watches with precise timing functions."
                    },
                    image: "https://images.unsplash.com/photo-1523170335258-f5ed11844a49?w=800&q=80"
                }
            };

            this.materials = {
                "MAT-STL": { tr: "Çelik", en: "Steel" },
                "MAT-TIT": { tr: "Titanyum", en: "Titanium" },
                "MAT-GLD": { tr: "18K Altın", en: "18K Gold" },
                "MAT-CER": { tr: "Seramik", en: "Ceramic" },
                "MAT-LTR": { tr: "Deri", en: "Leather" }
            };

            this.specIcons = {
                case: `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/><path d="M12 6v6l4 2"/></svg>`,
                thick: `<svg viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"/><path d="M8 6v12M16 6v12"/></svg>`,
                water: `<svg viewBox="0 0 24 24"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></svg>`,
                material: `<svg viewBox="0 0 24 24"><path d="M12 3l9 4.5v9L12 21l-9-4.5v-9L12 3z"/><path d="M12 12l9-4.5M12 12v9M12 12L3 7.5"/></svg>`,
                move: `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>`
            };

            this.products = [
                {
                    id: "meridian-aero",
                    code: "REF. 5500-P",
                    name: "Aero GMT Master",
                    category: "CAT-PLT",
                    material: "MAT-STL",
                    price: "₺115,000",
                    desc: {
                        tr: "Havacılık tarihinden ilham alan Aero GMT, çift zaman dilimi göstergesi ve döner seramik bezeli ile sık seyahat edenler için vazgeçilmez.",
                        en: "Inspired by aviation history, Aero GMT is an indispensable companion for frequent travelers."
                    },
                    specs: { case: "44mm", thick: "14mm", move: "GMT Automatic", water: "10 ATM" },
                    images: [
                        "/api/mob3.webp",
                        "/api/mob4.webp",
                        "/api/mob5.webp"
                    ]
                },
                {
                    id: "meridian-chrono",
                    code: "REF. 8800-C",
                    name: "Speedway Chrono",
                    category: "CAT-CHR",
                    material: "MAT-STL",
                    price: "₺168,000",
                    desc: {
                        tr: "Yarış pistlerinin heyecanını bileğinize taşıyan Speedway, sportif lüksün tanımıdır.",
                        en: "Bringing the excitement of racetracks to your wrist, Speedway is the definition of sporty luxury."
                    },
                    specs: { case: "41mm", thick: "12mm", move: "Auto Chronograph", water: "10 ATM" },
                    images: [
                        "/api/mob6.webp",
                        "/api/mob7.webp",
                        "/api/mob8.webp"
                    ]
                },
                {
                    id: "meridian-phantom",
                    code: "REF. 0000-X",
                    name: "Phantom Black",
                    category: "CAT-DIV",
                    material: "MAT-CER",
                    price: "₺195,000",
                    desc: {
                        tr: "Tamamen siyah seramikten üretilen Phantom, çizilmelere karşı ultra dayanıklıdır.",
                        en: "Crafted entirely from black ceramic, Phantom is ultra-resistant to scratches."
                    },
                    specs: { case: "43mm", thick: "11mm", move: "Caliber M-01", water: "20 ATM" },
                    images: [
                        "/api/mob9.webp",
                        "/api/mob10.webp",
                        "/api/mob11.webp"
                    ]
                },
                {
                    id: "meridian-nocturne",
                    code: "REF. 3030-N",
                    name: "Nocturne Elegance",
                    category: "CAT-DRS",
                    material: "MAT-LTR",
                    price: "₺85,000",
                    desc: {
                        tr: "Gece davetleri için mükemmel bir seçim. Zarafeti temsil eder.",
                        en: "A perfect choice for evening events. Represents elegance."
                    },
                    specs: { case: "38mm", thick: "8.5mm", move: "Quartz Precision", water: "3 ATM" },
                    images: [
                        "/api/mob12.webp",
                        "/api/mob13.webp",
                        "/api/mob14.webp"
                    ]
                }
            ];

            this.hoverIntervals = {};
            this.carouselAutoPlay = null;

            this.init();
        }

        init() {
            document.addEventListener('DOMContentLoaded', () => {
                this.renderAll();
                this.checkHash();
                this.startCarouselAutoPlay();
                window.addEventListener('popstate', () => this.checkHash());
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') this.goHome();
                });
                
                this.initCarouselSwipe();
                window.addEventListener('resize', () => this.handleResize());
            });
        }

        handleResize() {
            this.updateCarouselDots();
        }

        initCarouselSwipe() {
            const carousel = document.getElementById('categoryCarousel');
            if (!carousel) return;
            
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                carousel.addEventListener('scroll', () => {
                    const slideWidth = carousel.offsetWidth;
                    const newIndex = Math.round(carousel.scrollLeft / slideWidth);
                    if (newIndex !== this.state.carouselIndex) {
                        this.state.carouselIndex = newIndex;
                        this.updateCarouselDots();
                    }
                }, { passive: true });
            }
        }
        
        updateCarouselDots() {
            document.querySelectorAll('.carousel-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === this.state.carouselIndex);
            });
        }

        renderAll() {
            this.renderCategoryCarousel();
            this.renderFilters();
            this.renderMobileMenu();
            this.renderProducts();
            this.renderCategoryPages();
            this.renderDetailPages();
            this.updateLangDOM();
        }

        renderCategoryCarousel() {
            const carousel = document.getElementById('categoryCarousel');
            const dotsContainer = document.getElementById('carouselDots');
            
            let html = '';
            const categoryKeys = Object.keys(this.categories);
            
            categoryKeys.forEach((key) => {
                const cat = this.categories[key];
                const count = this.products.filter(p => p.category === key).length;
                html += `
                <div class="category-slide" onclick="WatchApp.openCategory('${key}')">
                    <img src="${cat.image}" alt="${cat[this.state.lang]}" loading="lazy">
                    <div class="category-slide-overlay">
                        <div class="category-slide-title">${cat[this.state.lang]}</div>
                        <div class="category-slide-count">${count} ${this.state.lang === 'tr' ? 'ürün' : 'products'}</div>
                    </div>
                </div>`;
            });
            
            carousel.innerHTML = html;
            
            const totalSlides = this.getTotalCarouselSlides();
            let dotsHtml = '';
            for (let i = 0; i < totalSlides; i++) {
                dotsHtml += `<span class="carousel-dot ${i === 0 ? 'active' : ''}" onclick="WatchApp.goToCarouselSlide(${i})"></span>`;
            }
            dotsContainer.innerHTML = dotsHtml;
        }

        getSlidesPerView() {
            if (window.innerWidth <= 768) return 1;
            if (window.innerWidth <= 1200) return 2;
            if (window.innerWidth <= 1400) return 3;
            return 4;
        }
        
        getTotalCarouselSlides() {
            const categoryKeys = Object.keys(this.categories);
            if (window.innerWidth <= 768) return categoryKeys.length;
            return Math.ceil(categoryKeys.length / this.getSlidesPerView());
        }

        slideCarousel(direction) {
            const totalSlides = this.getTotalCarouselSlides();
            
            this.state.carouselIndex += direction;
            if (this.state.carouselIndex < 0) this.state.carouselIndex = totalSlides - 1;
            if (this.state.carouselIndex >= totalSlides) this.state.carouselIndex = 0;
            
            this.updateCarouselPosition();
        }

        goToCarouselSlide(index) {
            this.state.carouselIndex = index;
            this.updateCarouselPosition();
        }

        updateCarouselPosition() {
            const carousel = document.getElementById('categoryCarousel');
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                const slideWidth = carousel.offsetWidth;
                carousel.scrollTo({
                    left: this.state.carouselIndex * slideWidth,
                    behavior: 'smooth'
                });
            } else {
                const slidesPerView = this.getSlidesPerView();
                const slideWidth = 100 / slidesPerView;
                const offset = this.state.carouselIndex * slideWidth * slidesPerView;
                carousel.style.transform = `translateX(-${Math.min(offset, 100 - (100 / slidesPerView) * Object.keys(this.categories).length + 100)}%)`;
            }
            
            this.updateCarouselDots();
        }

        startCarouselAutoPlay() {
            this.carouselAutoPlay = setInterval(() => {
                this.slideCarousel(1);
            }, 5000);
        }

        stopCarouselAutoPlay() {
            if (this.carouselAutoPlay) {
                clearInterval(this.carouselAutoPlay);
            }
        }

        renderCategoryPages() {
            const container = document.getElementById('categoryPages');
            let html = '';
            
            for (const [key, cat] of Object.entries(this.categories)) {
                html += `
                <div class="category-page" id="category-${key}">
                    <div class="category-nav-header">
                        <button class="category-back-btn" onclick="WatchApp.goHome()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            <span data-tr="Ana Sayfa" data-en="Home">${this.state.lang === 'tr' ? 'Ana Sayfa' : 'Home'}</span>
                        </button>
                        <span class="category-nav-title">${cat[this.state.lang]}</span>
                        <div class="category-nav-spacer"></div>
                    </div>
                    <div class="category-hero">
                        <img src="${cat.image}" alt="${cat[this.state.lang]}">
                        <div class="category-hero-overlay">
                            <h1 class="category-hero-title">${cat[this.state.lang]}</h1>
                            <p class="category-hero-desc">${cat.desc[this.state.lang]}</p>
                        </div>
                    </div>
                    <div class="category-products">
                        <div class="product-grid" id="categoryGrid-${key}"></div>
                    </div>
                </div>`;
            }
            
            container.innerHTML = html;
        }

        openCategory(key) {
            this.stopCarouselAutoPlay();
            document.getElementById('homePage').style.display = 'none';
            document.querySelectorAll('.category-page').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.detail-page').forEach(el => el.classList.remove('active'));
            
            const target = document.getElementById(`category-${key}`);
            if (target) {
                target.classList.add('active');
                this.state.activeCategory = key;
                this.renderCategoryProducts(key);
                window.scrollTo(0, 0);
                history.pushState({ category: key }, '', `#category-${key}`);
            }
        }

        renderCategoryProducts(key) {
            const grid = document.getElementById(`categoryGrid-${key}`);
            const products = this.products.filter(p => p.category === key);
            
            grid.innerHTML = products.map(p => this.renderProductCard(p)).join('');
            this.initCardSliders(grid);
        }

        renderFilters() {
            const list = document.getElementById('filterList');
            const allCount = this.products.length;
            
            let html = `<li><button class="filter-btn ${this.state.filter === 'all' ? 'active' : ''}" onclick="WatchApp.filterBy('all')">
                <span data-tr="Tüm Koleksiyon" data-en="All Collection">${this.state.lang === 'tr' ? 'Tüm Koleksiyon' : 'All Collection'}</span>
                <span class="filter-count">${allCount}</span>
            </button></li>`;

            for (const [key, val] of Object.entries(this.categories)) {
                const count = this.products.filter(p => p.category === key).length;
                if (count > 0) {
                    html += `<li><button class="filter-btn ${this.state.filter === key ? 'active' : ''}" onclick="WatchApp.filterBy('${key}')">
                        <span>${val[this.state.lang]}</span>
                        <span class="filter-count">${count}</span>
                    </button></li>`;
                }
            }
            list.innerHTML = html;
        }

        renderProductCard(p) {
            const dots = p.images.map((_, i) => 
                `<span class="slider-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></span>`
            ).join('');

            const images = p.images.map(img => 
                `<img src="${img}" loading="lazy" alt="${p.name}">`
            ).join('');

            return `
            <article class="product-card" data-id="${p.id}">
                <div class="card-image-container">
                    <div class="card-slider" data-product="${p.id}">
                        ${images}
                    </div>
                    <div class="slider-dots" data-product="${p.id}">
                        ${dots}
                    </div>
                </div>
                <div class="card-content" onclick="WatchApp.openDetail('${p.id}')">
                    <div class="card-header">
                        <div class="card-name">${p.name}</div>
                    </div>
                    <div class="card-specs">
                        <span class="card-spec">${p.specs.case}</span>
                        <span class="card-spec-dot"></span>
                        <span class="card-spec">${p.specs.move}</span>
                    </div>
                    <div class="card-footer">
                        <span class="card-price">${p.price}</span>
                        <span class="card-material">${this.materials[p.material][this.state.lang]}</span>
                    </div>
                </div>
            </article>`;
        }

        renderProducts() {
            const grid = document.getElementById('productGrid');
            const filtered = this.state.filter === 'all' 
                ? this.products 
                : this.products.filter(p => p.category === this.state.filter || p.material === this.state.filter);

            grid.innerHTML = filtered.map(p => this.renderProductCard(p)).join('');
            this.initCardSliders(grid);
        }

        initCardSliders(container = document) {
            const cards = container.querySelectorAll('.product-card');
            const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

            cards.forEach(card => {
                const productId = card.dataset.id;
                const slider = card.querySelector('.card-slider');
                const dotsContainer = card.querySelector('.slider-dots');
                const dots = dotsContainer.querySelectorAll('.slider-dot');
                const product = this.products.find(p => p.id === productId);
                const imageCount = product.images.length;
                const sliderWidth = () => slider.offsetWidth;

                let currentIndex = 0;
                let touchStartX = 0;
                let touchStartY = 0;
                let touchCurrentX = 0;
                let touchStartTime = 0;
                let isDragging = false;
                let isHorizontal = null;

                const setSliderPosition = (offset, animate = false) => {
                    if (animate) {
                        slider.classList.add('animating');
                    } else {
                        slider.classList.remove('animating');
                    }
                    slider.style.transform = `translateX(${offset}px)`;
                };

                const goToSlide = (index, animate = true) => {
                    currentIndex = Math.max(0, Math.min(index, imageCount - 1));
                    const offset = -currentIndex * sliderWidth();
                    setSliderPosition(offset, animate);
                    
                    dots.forEach((dot, i) => {
                        dot.classList.toggle('active', i === currentIndex);
                    });
                };

                // Dot tıklama
                dots.forEach((dot, i) => {
                    dot.addEventListener('click', (e) => {
                        e.stopPropagation();
                        goToSlide(i);
                    });
                });

                if (isTouchDevice) {
                    slider.addEventListener('touchstart', (e) => {
                        touchStartX = e.touches[0].clientX;
                        touchStartY = e.touches[0].clientY;
                        touchCurrentX = touchStartX;
                        touchStartTime = Date.now();
                        isDragging = true;
                        isHorizontal = null;
                        slider.classList.remove('animating');
                    }, { passive: true });

                    slider.addEventListener('touchmove', (e) => {
                        if (!isDragging) return;
                        
                        const touchX = e.touches[0].clientX;
                        const touchY = e.touches[0].clientY;
                        const diffX = touchX - touchStartX;
                        const diffY = touchY - touchStartY;
                        
                        // İlk harekette yönü belirle (10px eşik)
                        if (isHorizontal === null && (Math.abs(diffX) > 10 || Math.abs(diffY) > 10)) {
                            isHorizontal = Math.abs(diffX) > Math.abs(diffY);
                        }
                        
                        // Sadece yatay kaydırma
                        if (isHorizontal === true) {
                            e.preventDefault();
                            touchCurrentX = touchX;
                            
                            const baseOffset = -currentIndex * sliderWidth();
                            let dragOffset = diffX;
                            
                            // Sınırlarda elastik direnç
                            if (currentIndex === 0 && diffX > 0) {
                                dragOffset = diffX * 0.3;
                            } else if (currentIndex === imageCount - 1 && diffX < 0) {
                                dragOffset = diffX * 0.3;
                            }
                            
                            setSliderPosition(baseOffset + dragOffset, false);
                        }
                    }, { passive: false });

                    const handleTouchEnd = () => {
                        if (!isDragging) return;
                        isDragging = false;
                        
                        if (isHorizontal === true) {
                            const diff = touchStartX - touchCurrentX;
                            const timeDiff = Date.now() - touchStartTime;
                            const velocity = Math.abs(diff) / timeDiff;
                            const threshold = sliderWidth() * 0.15;
                            
                            // Hızlı swipe veya yeterli mesafe
                            if (velocity > 0.3 || Math.abs(diff) > threshold) {
                                if (diff > 0 && currentIndex < imageCount - 1) {
                                    goToSlide(currentIndex + 1);
                                } else if (diff < 0 && currentIndex > 0) {
                                    goToSlide(currentIndex - 1);
                                } else {
                                    goToSlide(currentIndex);
                                }
                            } else {
                                goToSlide(currentIndex);
                            }
                        }
                        
                        isHorizontal = null;
                    };

                    slider.addEventListener('touchend', handleTouchEnd, { passive: true });
                    slider.addEventListener('touchcancel', handleTouchEnd, { passive: true });

                } else {
                    // Masaüstü: hover ile otomatik geçiş
                    card.addEventListener('mouseenter', () => {
                        this.hoverIntervals[productId] = setInterval(() => {
                            const nextIndex = (currentIndex + 1) % imageCount;
                            goToSlide(nextIndex);
                        }, 1200);
                    });

                    card.addEventListener('mouseleave', () => {
                        if (this.hoverIntervals[productId]) {
                            clearInterval(this.hoverIntervals[productId]);
                            delete this.hoverIntervals[productId];
                        }
                        goToSlide(0);
                    });
                }
            });
        }

        renderDetailPages() {
            const container = document.getElementById('detailPages');
            container.innerHTML = this.products.map(p => {
                const thumbs = p.images.map((img, i) => 
                    `<img src="${img}" class="gallery-thumb ${i===0?'active':''}" onclick="WatchApp.changeImage('main-${p.id}', '${img}', this)">`
                ).join('');

                return `
                <div class="detail-page" id="${p.id}">
                    <header class="detail-header">
                        <button class="back-btn" onclick="WatchApp.goHome()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            <span data-tr="Koleksiyona Dön" data-en="Back to Collection">${this.state.lang==='tr'?'Koleksiyona Dön':'Back to Collection'}</span>
                        </button>
                        <span class="logo" style="font-size:1rem">${p.code}</span>
                        <div style="width:80px"></div>
                    </header>
                    <div class="detail-content">
                        <aside class="detail-info">
                            <div class="detail-breadcrumb">
                                <span>MERIDIAN</span> / <span>${this.categories[p.category][this.state.lang]}</span>
                            </div>
                            <h1 class="detail-title">${p.name}</h1>
                            <div class="detail-code">${p.price}</div>
                            <p class="detail-desc">${p.desc[this.state.lang]}</p>
                            
                            <div class="section-label" data-tr="Teknik Özellikler" data-en="Technical Specs">${this.state.lang==='tr'?'Teknik Özellikler':'Technical Specs'}</div>
                            <div class="specs-grid">
                                <div class="spec-box">
                                    <div class="spec-icon">${this.specIcons.case}</div>
                                    <div class="spec-text">
                                        <div class="spec-val">${p.specs.case}</div>
                                        <div class="spec-label" data-tr="Kasa Çapı" data-en="Case Diameter">${this.state.lang==='tr'?'Kasa Çapı':'Case Diameter'}</div>
                                    </div>
                                </div>
                                <div class="spec-box">
                                    <div class="spec-icon">${this.specIcons.thick}</div>
                                    <div class="spec-text">
                                        <div class="spec-val">${p.specs.thick}</div>
                                        <div class="spec-label" data-tr="Kalınlık" data-en="Thickness">${this.state.lang==='tr'?'Kalınlık':'Thickness'}</div>
                                    </div>
                                </div>
                                <div class="spec-box">
                                    <div class="spec-icon">${this.specIcons.water}</div>
                                    <div class="spec-text">
                                        <div class="spec-val">${p.specs.water}</div>
                                        <div class="spec-label" data-tr="Su Geçirmezlik" data-en="Water Resistance">${this.state.lang==='tr'?'Su Geçirmezlik':'Water Resistance'}</div>
                                    </div>
                                </div>
                                <div class="spec-box">
                                    <div class="spec-icon">${this.specIcons.move}</div>
                                    <div class="spec-text">
                                        <div class="spec-val">${p.specs.move}</div>
                                        <div class="spec-label" data-tr="Mekanizma" data-en="Movement">${this.state.lang==='tr'?'Mekanizma':'Movement'}</div>
                                    </div>
                                </div>
                            </div>
                        </aside>
                        <section class="detail-gallery">
                            <img src="${p.images[0]}" id="main-${p.id}" class="gallery-main" alt="${p.name}">
                            <div class="gallery-thumbs">${thumbs}</div>
                        </section>
                    </div>
                </div>`;
            }).join('');
        }

        changeImage(mainId, src, thumb) {
            const main = document.getElementById(mainId);
            main.style.opacity = 0;
            setTimeout(() => {
                main.src = src;
                main.style.opacity = 1;
            }, 150);
            
            thumb.parentElement.querySelectorAll('.gallery-thumb').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
        }

        openDetail(id) {
            this.stopCarouselAutoPlay();
            document.getElementById('homePage').style.display = 'none';
            document.querySelectorAll('.category-page').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.detail-page').forEach(el => el.classList.remove('active'));
            const target = document.getElementById(id);
            if (target) {
                target.classList.add('active');
                this.state.activeDetail = id;
                window.scrollTo(0, 0);
                history.pushState({ detail: id }, '', '#' + id);
            }
        }

        goHome() {
            document.querySelectorAll('.detail-page').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.category-page').forEach(el => el.classList.remove('active'));
            document.getElementById('homePage').style.display = 'block';
            this.state.activeDetail = null;
            this.state.activeCategory = null;
            history.pushState({}, '', window.location.pathname);
            this.closeMobileMenu();
            this.startCarouselAutoPlay();
        }

        checkHash() {
            const hash = window.location.hash.slice(1);
            if (hash.startsWith('category-')) {
                const catKey = hash.replace('category-', '');
                this.openCategory(catKey);
            } else if (hash && this.products.some(p => p.id === hash)) {
                this.openDetail(hash);
            } else {
                this.goHome();
            }
        }

        filterBy(key) {
            this.state.filter = key;
            this.renderFilters();
            this.renderProducts();
        }

        setLang(lang) {
            this.state.lang = lang;
            
            // Dil butonlarını güncelle
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === lang.toUpperCase());
            });
            
            // Aktif sayfa bilgisini sakla
            const activeDetail = this.state.activeDetail;
            const activeCategory = this.state.activeCategory;
            
            // Sayfaları yeniden render et
            this.updateLangDOM();
            this.renderCategoryCarousel();
            this.renderFilters();
            this.renderMobileMenu();
            this.renderProducts();
            this.renderCategoryPages();
            this.renderDetailPages();
            
            // Aktif sayfayı geri yükle
            if (activeDetail) {
                this.state.activeDetail = activeDetail;
                document.getElementById('homePage').style.display = 'none';
                const detailPage = document.getElementById(activeDetail);
                if (detailPage) {
                    detailPage.classList.add('active');
                }
            } else if (activeCategory) {
                this.state.activeCategory = activeCategory;
                document.getElementById('homePage').style.display = 'none';
                const categoryPage = document.getElementById(`category-${activeCategory}`);
                if (categoryPage) {
                    categoryPage.classList.add('active');
                    this.renderCategoryProducts(activeCategory);
                }
            }
        }

        updateLangDOM() {
            document.querySelectorAll('[data-tr][data-en]').forEach(el => {
                el.textContent = el.getAttribute(`data-${this.state.lang}`);
            });
        }

        renderMobileMenu() {
            const nav = document.getElementById('mobileMenuNav');
            let html = `<li><a href="#" class="mobile-menu-link ripple-container ripple-dark" onclick="createRipple(event); WatchApp.goHome(); WatchApp.closeMobileMenu()">
                <span data-tr="Tüm Koleksiyon" data-en="All Collection">${this.state.lang === 'tr' ? 'Tüm Koleksiyon' : 'All Collection'}</span>
                <span class="mobile-menu-count">${this.products.length}</span>
            </a></li>`;
            
            for (const [key, val] of Object.entries(this.categories)) {
                const count = this.products.filter(p => p.category === key).length;
                html += `<li><a href="#category-${key}" class="mobile-menu-link ripple-container ripple-dark" onclick="createRipple(event); WatchApp.openCategory('${key}'); WatchApp.closeMobileMenu()">
                    <span>${val[this.state.lang]}</span>
                    <span class="mobile-menu-count">${count}</span>
                </a></li>`;
            }
            nav.innerHTML = html;
        }

        toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const btn = document.getElementById('mobileMenuBtn');
            menu.classList.toggle('active');
            btn.classList.toggle('active');
            document.body.style.overflow = menu.classList.contains('active') ? 'hidden' : '';
        }

        closeMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const btn = document.getElementById('mobileMenuBtn');
            menu.classList.remove('active');
            btn.classList.remove('active');
            document.body.style.overflow = '';
        }
    }

    const WatchApp = new WatchStore();
</script>

</body>
</html>
